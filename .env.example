# ─── Manuscripta Environment Variables ───
# Copy this file to .env and fill in the values you need.
# All variables are optional unless marked [REQUIRED].

# ─── Server ───
PORT=8787
MANUSCRIPTA_DATA_DIR=          # Custom data directory (default: ./data)
MANUSCRIPTA_COMPILE_TIMEOUT=120  # Max seconds per compilation pass (default: 120)

# ─── LLM Configuration ───
# Server-side defaults. Users can also set these in the UI settings.
MANUSCRIPTA_LLM_ENDPOINT=https://api.openai.com/v1/chat/completions
MANUSCRIPTA_LLM_API_KEY=       # Your OpenAI / compatible API key
MANUSCRIPTA_LLM_MODEL=gpt-4o

# ─── Authentication ───
MANUSCRIPTA_AUTH_ENABLED=false       # Set to true to enable user accounts + login
MANUSCRIPTA_AUTH_SECRET=             # [REQUIRED for production] HMAC secret for session tokens
MANUSCRIPTA_AUTH_SESSION_TTL=604800  # Session lifetime in seconds (default: 7 days)

# ─── Audit Logging ───
MANUSCRIPTA_AUDIT_ENABLED=true       # Set to false to disable audit logging (default: true)

# ─── OIDC / SSO (Enterprise) ───
# Configure these to enable "Sign in with SSO" via any OIDC-compliant IdP
# (Okta, Azure AD, Keycloak, Google Workspace, Auth0, etc.)
MANUSCRIPTA_OIDC_ISSUER=             # e.g. https://accounts.google.com
MANUSCRIPTA_OIDC_CLIENT_ID=
MANUSCRIPTA_OIDC_CLIENT_SECRET=
MANUSCRIPTA_OIDC_REDIRECT_URI=       # e.g. http://localhost:8787/api/auth/oidc/callback
MANUSCRIPTA_OIDC_SCOPES=openid email profile

# ─── Collaboration ───
MANUSCRIPTA_COLLAB_TOKEN_SECRET=   # [REQUIRED for production] HMAC secret for collab tokens. CHANGE THIS from default!
MANUSCRIPTA_COLLAB_TOKEN_TTL=86400 # Token lifetime in seconds (default: 24h)
MANUSCRIPTA_COLLAB_REQUIRE_TOKEN=true  # Set to false to disable token auth (local-only use)
MANUSCRIPTA_COLLAB_FLUSH_DEBOUNCE_MS=800  # Debounce for flushing Y.js docs to disk

# ─── Backup ───
MANUSCRIPTA_BACKUP_DIR=          # Custom backup directory (default: ../backups relative to data dir)
MANUSCRIPTA_BACKUP_INTERVAL=3600 # Auto-backup interval in seconds (default: 3600 = 1h, 0 = disabled)
MANUSCRIPTA_BACKUP_KEEP=24       # Max backups per project (default: 24, oldest pruned)

# ─── Tunnel (remote collaboration) ───
# Options: localtunnel, cloudflared, ngrok, or false to disable
MANUSCRIPTA_TUNNEL=false

# ─── Python (for plotting) ───
MANUSCRIPTA_PYTHON=            # Path to Python binary (auto-detected if not set)

# ─── MinerU (PDF-to-Markdown) ───
MANUSCRIPTA_MINERU_API_BASE=https://mineru.net/api/v4
MANUSCRIPTA_MINERU_TOKEN=      # MinerU API token

# ─── Mendeley OAuth 2.0 ───
# Register an app at https://dev.mendeley.com/myapps.html
MANUSCRIPTA_MENDELEY_CLIENT_ID=
MANUSCRIPTA_MENDELEY_CLIENT_SECRET=
MANUSCRIPTA_MENDELEY_REDIRECT_URI=  # e.g., http://localhost:8787/api/mendeley/callback
